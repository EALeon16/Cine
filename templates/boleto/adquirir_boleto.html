{% extends 'principal.html' %}
{% block body%}
<div class="container section small-padding">
<div class="modal-content">
    <div id="content_hero" style="background-image: url(images/hero-contact.jpg)">
      <div class="container">
        <div class="row blurb scrollme animateme" data-when="exit" data-from="0" data-to="1" data-opacity="0"
          data-translatey="100">
          <div class="col-md-9">
            
  
            <h1>Tipos de boletos</h1>
          </div>
        </div>
      </div>
    </div>
  
    <script>
     $(document).on('ready', constructor);
     function constructor(){
       sumar();
       mul();
     }

     function sumar (){
       $('#contenedorS').on('change', '#cantidad_boletoN', '#cantidad_boletoE', function(){
         var num1 = parseInt($('#cantidad_boletoN').val());
         var num2 = parseInt($('#cantidad_boletoE').val());
         if(isNaN(num1)){
           num1 = 0;
         }
         if(isNaN(num2)){
           num2 = 0;
         }
         $('#total_boleto').val(num1+num2);
       });
     }

       function mul (){
       $('#contenedorS').on('change', '#cantidad_boletoN', '#cantidad_boletoE', function(){
         var num1 = parseInt($('#cantidad_boletoN').val());
         var num2 = parseInt($('#cantidad_boletoE').val());
         if(isNaN(num1)){
           num1 = 0;
         }
         if(isNaN(num2)){
           num2 = 0;
         }

         var m1 = num1 * 7;
         var m2 = num2 * 3.5;
         $('#precio_total').val(m1+m2);
       })

      

     }

     $(function(){
        $("#siguiente").click(function(){
            $("#contenedorPago").show();
        });
    });

    function cardFormValidate(){
    var cardValid = 0;

    //card number validation
    $('#card_number').validateCreditCard(function(result){
        if(result.valid){
            $("#card_number").removeClass('required');
            cardValid = 1;
        }else{
            $("#card_number").addClass('required');
            cardValid = 0;
        }
    });
      
    //card details validation
    var cardName = $("#name_on_card").val();
    var expMonth = $("#expiry_month").val();
    var expYear = $("#expiry_year").val();
    var cvv = $("#cvv").val();
    var regName = /^[a-z ,.'-]+$/i;
    var regMonth = /^01|02|03|04|05|06|07|08|09|10|11|12$/;
    var regYear = /^2017|2018|2019|2020|2021|2022|2023|2024|2025|2026|2027|2028|2029|2030|2031$/;
    var regCVV = /^[0-9]{3,3}$/;
    if (cardValid == 0) {
        $("#card_number").addClass('required');
        $("#card_number").focus();
        return false;
    }else if (!regMonth.test(expMonth)) {
        $("#card_number").removeClass('required');
        $("#expiry_month").addClass('required');
        $("#expiry_month").focus();
        return false;
    }else if (!regYear.test(expYear)) {
        $("#card_number").removeClass('required');
        $("#expiry_month").removeClass('required');
        $("#expiry_year").addClass('required');
        $("#expiry_year").focus();
        return false;
    }else if (!regCVV.test(cvv)) {
        $("#card_number").removeClass('required');
        $("#expiry_month").removeClass('required');
        $("#expiry_year").removeClass('required');
        $("#cvv").addClass('required');
        $("#cvv").focus();
        return false;
    }else if (!regName.test(cardName)) {
        $("#card_number").removeClass('required');
        $("#expiry_month").removeClass('required');
        $("#expiry_year").removeClass('required');
        $("#cvv").removeClass('required');
        $("#name_on_card").addClass('required');
        $("#name_on_card").focus();
        return false;
    }else{
        $("#card_number").removeClass('required');
        $("#expiry_month").removeClass('required');
        $("#expiry_year").removeClass('required');
        $("#cvv").removeClass('required');
        $("#name_on_card").removeClass('required');
        return true;
    }
}
$(document).ready(function() {
    //card validation on input fields
    $('#paymentForm input[type=text]').on('keyup',function(){
        cardFormValidate();
    });
});
     
    </script>
  
    <div class="container section small-padding">
      <div class="form-group" >
        {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            <li>
                <div class="alert alert-danger">{{ message }}</div>
            </li>
            {% endfor %}
        </ul>
        {% endif%}
    </div>
      <div class="row">
        <div class="col-sm-12">
          <h2>Elija los tipos de Boleto que desea adquirir</h2>
         <!-- <div class="form-group" >
            {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                <li>
                    <div class="alert alert-danger">{{ message }}</div>
                </li>
                {% endfor %}
            </ul>
            {% endif%}
        </div>-->
        <h3>Nro de Boletos disponibles :{{disponibles}}</h3>
  
          <input name="txtPrec_0002" id="txtPrec_0002" type="hidden" value="6.00" class="form-control input-mini ">
          <input name="txtPrec_0003" id="txtPrec_0003" type="hidden" value="3.00" class="form-control input-mini ">
          <!---
          <table border="0" cellpadding="0" cellspacing="0" width="100%" height="100%" style="border: 0px solid #000000;">
            <tbody>
              <tr>
                <td width="48%" valign="top">
                  <table class="table table-striped" id="tabPrec">
                    <thead>
                      <tr>
                        <th>Tipo de Boleto</th>
                        <th>Precio por Boleto</th>
                        <th>Precio total</th>
                        <th>Cantidad</th>
                      </tr>
                    </thead>
                    <tbody id="fil_0">
                      <tr class="active" id="tipo_0002">
                        <td>BOLETO NORMAL</td>
                        <td class="labPrec_0002" id="labPrec_0002">$ 6.00</td>
                        <td><span class="precio" id="precio_0002"></span></td>
                        <td>
                          <div class="input-group">
                            <div class="input-group-btn"> <button type="button"
                                onclick="sumarestaTotal(&#39;0002&#39;,&#39;-1&#39;); return false;" id="btnDe_0002"
                                class="btn btn-default" aria-label="Bold"
                                style="border-top-left-radius: 5px; border-bottom-left-radius: 5px;">-</button>
                              <input name="txtCant_0002" id="txtCant_0002" type="text" value="0" maxlength="2" readonly=""
                                class="form-control input-mini spinbox-input"
                                style="    width: 20% !important; height: 34px;float: none;display: inline;top: 4px;text-align: center;"
                                aria-label="">
                              <button type="button" id="btnIn_0002"
                                onclick="sumarestaTotal(&#39;0002&#39;,&#39;1&#39;); return false;"
                                class="btn btn-default" aria-label="Bold"
                                style="border-top-right-radius: 5px;border-bottom-right-radius: 5px;">+</button>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr class="active" id="2D NIÃ‘O">
                        <td>BOLETO ESPECIAL(50%)</td>
                        <td class="precio-boleto" id="labPrec_0003">$ 3.00</td>
                        <td><span class="precio" id="precio_0003"></span></td>
                        <td>
                          <div class="input-group">
                            <div class="input-group-btn"> <button type="button"
                                onclick="sumarestaTotal(&#39;0003&#39;,&#39;-1&#39;); return false;" id="btnDe_0003"
                                class="btn btn-default" aria-label="Bold"
                                style="border-top-left-radius: 5px; border-bottom-left-radius: 5px;"> -</button>
                              <input name="txtCant_0003" id="txtCant_0003" type="text" value="0" maxlength="2" readonly=""
                                class="form-control input-mini spinbox-input"
                                style="    width: 20% !important; height: 34px;float: none;display: inline;top: 4px;text-align: center;"
                                aria-label=""> <button type="button" id="btnIn_0003"
                                onclick="sumarestaTotal(&#39;0003&#39;,&#39;1&#39;); return false;"
                                class="btn btn-default" aria-label="Bold"
                                style="border-top-right-radius: 5px;border-bottom-right-radius: 5px;">+</button>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                    <tfoot>
                      <tr>
                        <td></td>
                        <td></td>
                        <td><b>Total: $ <span id="precioTotal" name="precioTotal"></span></b></td>
                        <td><b>Cantidad de boletos:<span id="cantidadTotal" name="cantidadTotal"></span></b></td>
                      </tr>
                    </tfoot>
                  </table>
  
                </td>
              </tr>
            </tbody>
  
          </table>
  -->
 
          <form id="register-form" class="login" method="POST" >{%csrf_token%}
            <div class="col-md-4" id='contenedorS'>
              <div class="form-group">
                <label for="nombres">Cantidad de boletos (TARIFA NORMAL)</label>
              <input type="number" min="0"  value="0" placeholder="ingrese el nombre de la sala" name="cantidad_boletoN" id="cantidad_boletoN" class="monto" required />
              </div>
              <div class="form-group">
                <label for="nombres">Cantidad de boletos (TARIFA ESPECIAL 50%)</label>
            <input type="number" min="0" value="0"  placeholder="ingrese el nombre de la sala" name="cantidad_boletoE" id="cantidad_boletoE" class="monto" required />
              </div>
              <div class="form-group">
                <label for="">Cantidad Total de boletos</label>
                <input type="text" placeholder="Asientos totales" name="total_boleto" readonly id="total_boleto" class="login__input" required /> 
              </div>
              <div class="form-group">
                <label for="">Precio Total a pagar</label>
            <input type="text" placeholder="Asientos totales" readonly name="precio_total"  id="precio_total" class="login__input" required />
              </div>
              <div class="form-group">
                <a type='' id="reg" href="/" class="btn btn-danger" value="">Cancelar</a>
                <input type="button"  id="siguiente" hidden class="btn btn-success" value="Siguiente" />
            <button type='submit' id="reg" class="btn btn-success" value="submit"n>Registrar</button>>
         
              </div>
            </div>
          </form>
          <div class="col-md-4" id='contenedorPago' hidden>
            <div class="form-group">
              <form method="post" id="paymentForm">
                <p>
                    <label>Card number</label>
                    <input type="text" placeholder="1234 5678 9012 3456" id="card_number" >
                </p>
                <p>
                    <label>Expiry month</label>
                    <input type="text" placeholder="MM" maxlength="5" id="expiry_month">
                </p>
                <p>
                    <label>Expiry year</label>
                    <input type="text" placeholder="YYYY" maxlength="5" id="expiry_year">
                </p>
                <p>
                    <label>CVV</label>
                    <input type="text" placeholder="123" maxlength="3" id="cvv">
                </p>
                <p>
                    <label>Name on card</label>
                    <input type="text" placeholder="Codex World" id="name_on_card">
                </p>
            </form>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
  {% endblock%}